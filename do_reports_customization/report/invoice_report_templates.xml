<?xml version='1.0' encoding='UTF-8'?>
<odoo>

    <template inherit_id="web.external_layout_boxed" id="boxed_footer_inherit">
        <xpath expr="//div[@t-attf-class='header o_company_#{company.id}_layout']" position="replace">
            <t t-if="company.name == 'Albanna Scientific Bureau'">
                <div t-attf-class="header standard_layout" t-att-style="report_header_style">
                    <div class="o_striped_header">
                        <!--<div t-attf-class="header o_company_#{company.id}_layout" t-att-style="report_header_style">
                          <div class="o_boxed_header">-->
                        <div class="row" style="border-bottom: 3px solid #366092">
                            <div class="col-10">
                                <img t-if="company.logo" t-att-src="image_data_uri(company.logo)"
                                     style="max-height:120px" alt="Logo"/>
                            </div>
                            <div class="col-2">
                                <img src="/web/image/568-14cc8033/IQAS-small.jpeg" alt="IQAS Accreditation"
                                     width="100px" height="100px" style="vertical-align:middle"/>
                                <p style="text-center; font-size:8px">Accreditation No. IB 017<br/>ISO/IEC 17020:2012
                                </p>
                            </div>
                        </div>
                        <div class="row" >
                            <div class="col-12 not-first-page text-end" t-if="o and o._name in ['stock.picking', 'account.move']" style="padding-top:8px;">
                                <span>
                                    <h4 t-att-style="'color:' + (company.primary_color or 'red') + ';'">
                                        <t t-if="o._name == 'stock.picking'">Delivery Note:</t>
                                        <t t-else="">Invoice:</t>
                                        <t t-esc="o.name"/>
                                    </h4>
                                </span>
                           </div>
                        </div>
                            <t t-if="o._name=='purchase.order'">
                                <div class="row mt-1.5 mb92 not-first-page " style="margin-left:570px; padding-bottom:100px;">
                                    <div class="col-12 bm-2 text-end">
                                        <strong style='color:#366092;'>PO Number</strong>:
                                        <span t-field="o.name" class="m-0"/>
                                    </div>
                                </div>
                            </t>
                    </div>

                </div>
            </t>
            <t t-elif="company.name == 'Altib Scientific Bureau'">
                <div t-attf-class="header standard_layout" t-att-style="report_header_style">
                    <div class="o_striped_header">
                        <div class="row" style="border-bottom: 3px solid #42BB68">
                            <div class="col-12">
                                <img t-if="company.logo" t-att-src="image_data_uri(company.logo)"
                                     style="max-height:140px; width: 100%" alt="Logo"/>
                            </div>
                        </div>
                        <div class="row" >
                            <div class="col-12 not-first-page text-end" t-if="o and o._name in ['stock.picking', 'account.move']" style="padding-top:8px;">
                                <span>
                                    <h4 t-att-style="'color:' + (company.primary_color or 'red') + ';'">
                                        <t t-if="o._name == 'stock.picking'">Delivery Note:</t>
                                        <t t-else="">Invoice:</t>
                                        <t t-esc="o.name"/>
                                    </h4>
                                </span>
                           </div>
                        </div>
                            <t t-if="o._name=='purchase.order'">
                                <div class="row mt-1.5 mb92 not-first-page " style="margin-left:570px; padding-bottom:100px;">
                                    <div class="col-12 bm-2 text-end">
                                        <strong style='color:#366092;'>PO Number</strong>:
                                        <span t-field="o.name" class="m-0"/>
                                    </div>
                                </div>
                            </t>
                    </div>

                </div>
            </t>
            <t t-elif="company.name == 'Albanna Drugstore'">
                <div t-attf-class="header standard_layout" t-att-style="report_header_style">
                    <div class="o_striped_header">
                        <div class="row mb8" style="border-bottom: 3px solid #af161c; padding-bottom: 45px;">
                            <div class="col-6 d-flex mt-1">
                                <span style="font-family: adobe arabic; font-size: 40px; color: #366092;">
                                    أدوية ومستلزمات طبية
                                </span>
                                <br/>
                                <span style="color: #366092; font-size: 35px; white-space: nowrap;">
                                    Pharmaceuticals and Medical Supplies
                                </span>
                            </div>
                            <div class="col-6 d-flex align-items-center">
                                <img t-if="company.logo" t-att-src="image_data_uri(company.logo)"
                                     style="max-height: 140px;" alt="Logo"/>
                            </div>
                            <div class="row">
                                <div class="col-12 not-first-page text-end"
                                     t-if="o and o._name in ['stock.picking', 'account.move']">
                                    <h4 t-att-style="'color:' + (company.primary_color or 'red') + ';'">
                                        <t t-if="o._name == 'stock.picking'">Delivery Note:</t>
                                        <t t-else="">Invoice:</t>
                                        <t t-esc="o.name"/>
                                    </h4>
                                </div>
                            </div>
                        </div>
                            <t t-if="o._name == 'purchase.order'">
                                <div class="mt-6 mb32 not-first-page">
                                    <div class="col-12 text-end" style="font-size: 20px;">
                                        <strong style="color: #366092;">PO Number:</strong>
                                        <span t-field="o.name" class="m-0"/>
                                    </div>
                                </div>
                            </t>
                    </div>
                </div>
            </t>


            <t t-else="">
                <div t-attf-class="header standard_layout" t-att-style="report_header_style">
                    <div class="o_striped_header">
                        <t t-if="company.name == 'Dar Albanna Group Co. Ltd.'">
                        <div class="row">
                                <div class="col-12">
                                    <img class="img img-responsive" src="/albanna_reports_customization/static/src/img/DAG-LH_top_small _2.png" alt="Logo"/>
                                </div>                             
                        </div>
                            <t t-if="o._name=='purchase.order'">
                                <div class="row mt-1.5 mb90 not-first-page " style="margin-left:570px;">
                                    <div class="col-12 bm-2 text-end" style="font-size: 20px;">
                                        <strong style='color:#366092;'>PO Number</strong>:
                                        <span t-field="o.name" class="m-0"/>
                                    </div>
                                </div>
                            </t>
                        </t>
                        
                            <t t-if="company.name == 'Mawarid Albanna Co. Ltd.'">
                                <div class="row" style="border-bottom: 3px solid #366092">
                                <div class="col-6">
                                    <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" style="max-height:120px;" alt="Logo"/>
                                </div>
                          <!--       <div class="col-6 text-end mb4">
                                    <div class="mt2 h4" t-field="company.report_header"/>
                                    <div name="company_address" class="float-end" style="font-size:15px;">
                                        <ul class="list-unstyled">
                                            <li t-if="company.company_details">
                                                <t t-esc="company.company_details"/>
                                            </li>
                                            <li t-else="">
                                                <t t-esc="company.partner_id"
                                                   t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: true}"/>
                                            </li>
                                            <li t-if="forced_vat">
                                                <t t-esc="company.country_id.vat_label or 'Tax ID'"/>:
                                                <span t-esc="forced_vat"/>
                                            </li>
                                        </ul>
                                    </div>
                                </div> -->
                                </div>
                                <t t-if="o._name=='purchase.order'">
                                    <div class="row mt-1.5 mb90 not-first-page " style="margin-left:570px;">
                                        <div class="col-12 bm-2 text-end">
                                            <strong style='color:#366092;'>PO Number</strong>:
                                            <span t-field="o.name" class="m-0"/>
                                        </div>
                                    </div>
                                </t>
                            </t>
                        <div class="row">
                            <div class="col-12 not-first-page text-end" t-if="o and o._name in ['stock.picking', 'account.move']">
                                <span>
                                    <h4 t-att-style="'color:' + (company.primary_color or 'red') + ';'">
                                        <t t-if="o._name == 'stock.picking'">Delivery Note:</t>
                                        <t t-else="">Invoice:</t>
                                        <t t-esc="o.name"/>
                                    </h4>
                                </span>
                           </div>
                        </div>
                    </div>
                </div>
            </t>
        </xpath>

        <xpath expr="//div[@t-attf-class='footer o_boxed_footer o_company_#{company.id}_layout']" position="replace">
             <t t-if="company.name == 'Albanna Scientific Bureau'">
                 <div t-attf-class="footer">
                     <t t-if="o and o._name == 'account.move'" style="position:relative;top:10px;">
                         <div class="last-page row">
                             <div class="col-12">
                                <img t-if="o.create_uid.sign_signature"
                                 t-att-src="image_data_uri(o.create_uid.sign_signature)"
                                 style="max-height: 2cm;"/>
                            </div>
                         </div>
                        <div class="last-page row">
                            <div class="col-4" style="border-top:1px solid black;">
                                <span>Name: <span t-field="o.create_uid"/></span>
                                <br/>
                                <span>Title: <t t-if="o.create_uid.partner_id.function"><t t-esc="o.create_uid.partner_id.function"/></t></span>
                            </div>
                            <div class="col-5">
                            </div>
                            <div class="col-3" style="border-top:1px solid black;">
                                <p class="text-center">Customer Sign/Stamp</p>
                            </div>
                        </div>
                    </t>
                     <div class="row">
                         <div class="col-12 text-end">
                             <strong>
                                 <div t-if="report_type == 'pdf'">
                                     Page
                                     <span class="page"/>
                                     of
                                     <span class="topage"/>
                                 </div>
                             </strong>
                         </div>
                     </div>
                     <div class="row" style="border-top: 3px solid #366092">
                         <div class="col-2 d-flex align-items-center">
                             <img class="mx-auto" src="/web/image/569-7f5cccc3/IAF%20Logo-small.png" height="70px"/>
                         </div>
                         <div class="col-8 mt-1 mx-0">
                             <div class="row  d-flex align-items-center text-center text-wrap lh-base"
                                  style="font-size:12px; font-family:adobe arabic; color: #366092">
                                 <p>المكتب: مجمع البناء التجاري، المنصور، شارع ١٤ رمضان، محلة ٦١٣، زقاق ١٨، بناية رقم
                                     ١٢٨، بغداد، العراق
                                     <br/>
                                     مخزن الأدوية: عوريج الصناعية، شارع الربيع، الطريق الرئيسي، بغداد، العراق
                                 </p>
                             </div>
                             <div class="row  d-flex align-items-center text-center text-wrap lh-base"
                                  style="font-size:11.5px; color: #366092">
                                 <p>Office: Al Mansour District, 14th Ramadan Street Section 613, Street 18, Building
                                     No. 128, Baghdad Iraq
                                     <br/>
                                     Warehouse: Awerij Industrial Zone, Al Rabee Street, Main Road, Baghdad, Iraq
                                     <br/>
                                     Tel: +964 782 811 7711, Email: sales@albanna.com - Website:
                                     www.albannascientific.com
                                 </p>
                             </div>
                         </div>
                         <div class="col-2 d-flex align-items-center">
                             <img class="mx-auto" src="/web/image/570-1c0956ea/ASCERT%209001-2015%20Logo-small.png"
                                  height="60px"/>
                         </div>
                     </div>
                 </div>
             </t>
             <t t-elif="company.name == 'Altib Scientific Bureau'">
                 <div t-attf-class="footer">
                     <t t-if="o and o._name == 'account.move'" style="position:relative;top:10px;">
                         <div class="last-page row">
                             <div class="col-12">
                                <img t-if="o.create_uid.sign_signature"
                                 t-att-src="image_data_uri(o.create_uid.sign_signature)"
                                 style="max-height: 2cm;"/>
                            </div>
                         </div>
                        <div class="last-page row">
                            <div class="col-4" style="border-top:1px solid black;">
                                <span>Name: <span t-field="o.create_uid"/></span>
                                <br/>
                                <span>Title: <t t-if="o.create_uid.partner_id.function"><t t-esc="o.create_uid.partner_id.function"/></t></span>
                            </div>
                            <div class="col-5">
                            </div>
                            <div class="col-3" style="border-top:1px solid black;">
                                <p class="text-center">Customer Sign/Stamp</p>
                            </div>
                        </div>
                    </t>
                     <div class="row">
                         <div class="col-12 text-end">
                             <strong>
                                 <div t-if="report_type == 'pdf'">
                                     Page
                                     <span class="page"/>
                                     of
                                     <span class="topage"/>
                                 </div>
                             </strong>
                         </div>
                     </div>
                     <div class="row" style="border-top: 3px solid #42BB68">
                         <div class="col-12 mt-1 mx-0">
                            <br/>
                             <div class="row  d-flex align-items-center text-center text-wrap lh-base"
                                  style="font-size:13px; color: #3B3838;">
                                 <p>Al Mansour District, 14th Ramadan St., Sec. 613, Bldg. 128, Baghdad – Iraq;
                                     Tel: +967 782 811 7711; Email: contact@altibscientific.com
                                 </p>
                             </div>
                            <div class="row d-flex align-items-center text-center text-wrap lh-base" style="font-size:13px; color:#3B3838;">
                                <p>
                                   <span>contact@altibscientific.com</span>
                                    <span style="font-family: 'Adobe Arabic';">المنصور، شارع ١٤ رمضان، محلة ٦١٣، زقاق ١٨، بناية رقم ١٢٨، بغداد، العراق – هاتف ٧٧١١ ٨١١ ٧٨٢ ٩٦٧+ البريد الإلكتروني</span>
                                </p>
                            </div>
                         </div>
                     </div>
                 </div>
             </t>
             <t t-elif="company.name == 'Albanna Drugstore'">
                 <div t-attf-class="footer">
                    <t t-if="o and o._name == 'account.move'">
                        <div class="last-page row">
                            <div class="col-12">
                             <img t-if="o.create_uid.sign_signature"
                                  t-att-src="image_data_uri(o.create_uid.sign_signature)"
                                  style="max-height: 2cm;"/>
                            </div>
                        </div>
                        <div class="last-page row">
                            <div class="col-4" style="border-top:1px solid black;">
                                <span>Name: <span t-field="o.create_uid"/></span>
                                <br/>
                                <span>Title: <t t-if="o.create_uid.partner_id.function"><t t-esc="o.create_uid.partner_id.function"/></t></span>
                            </div>
                            <div class="col-5">
                            </div>
                            <div class="col-3" style="border-top:1px solid black;">
                                <p class="text-center">Customer Sign/Stamp</p>
                            </div>
                        </div>
                    </t>
                     <div class="row">
                         <div class="col-12 text-end">
                             <strong>
                                 <div t-if="report_type == 'pdf'">
                                     Page
                                     <span class="page"/>
                                     of
                                     <span class="topage"/>
                                 </div>
                             </strong>
                         </div>
                     </div>
                     <div class="row mb0" style="text-center; border-top: 3px solid #af161c">
                         <!-- <div class="col-1 d-flex align-items-center">
                            <img class="mx-auto" src="/web/image/596-649399e9/icons8-address-50.png" height="30px"/>
                          </div> -->
                         <div class="col-7" style="text-center; text-nowrap">
                             <span style="font-family: adobe arabic; color: #366092">بغداد شارع السعدون - ساحة النصر،
                                 قرب مختبر منذر مصطفى
                             </span>
                             <p style="font-size: 11.5px; ; color: #366092">Baghdad Alsadoun Street, Near Munther
                                 Mustafa Laboratory
                             </p>
                         </div>
                         <!-- <div class="col-1 d-flex align-items-center">
                           <image class="mx-auto" src="/web/image/597-4757413a/icons8-phone-50.png" height="30px"/>
                         </div> -->
                         <div class="col-5">
                             <table>
                                 <tr>
                                     <td class="text-nowrap" style="text-center; padding: 5px">
                                         <span style="font-family: adobe arabic; font-size: 12.5px; ; color: #366092">
                                             الصيدلاني أسامة باسم
                                         </span>
                                     </td>
                                     <td class="text-nowrap" style="text-center; padding: 5px">
                                         <span style="font-family: adobe arabic; font-size: 12.5px; ; color: #af161c">
                                             <b>0770 390 9023</b>
                                         </span>
                                     </td>
                                     <td class="text-nowrap" style="text-center; padding: 5px">
                                         <span style="font-family: adobe arabic; font-size: 12.5px; ; color: #366092">
                                             Ph. Osama Basim
                                         </span>
                                     </td>
                                 </tr>
                                 <tr>
                                     <td class="text-nowrap" style="text-center; padding: 5px">
                                         <span style="font-family: adobe arabic; font-size: 12.5px; ; color: #366092">
                                             الأستاذ عمار أكرام
                                         </span>
                                     </td>
                                     <td class="text-nowrap" sytle="text-center; padding: 5px">
                                         <span style="font-family: adobe arabic; font-size: 12.5px; ; color: #af161c">
                                             <b>0783 008 8833</b>
                                         </span>
                                     </td>
                                     <td class="text-nowrap" style="text-center; padding: 5px">
                                         <span style="font-family: adobe arabic; font-size: 12.5px; ; color: #366092">
                                             Mr. Ammar Ikram
                                         </span>
                                     </td>
                                 </tr>
                             </table>
                             <!-- <span style="font-family: adobe arabic; font-size: 12.5px; ; color: #366092">Ph. Osma Basim 0770 390 9023 الصيدلاني أسامة باسم<br/>Mr. Ammar Ikram 0783 008 8833 أستاذ عمار أكرام</span> -->
                         </div>
                     </div>
                 </div>
             </t>
             <t t-else="">
                 <div t-attf-class="footer o_company_#{company.id}_layout">
                     <t t-if="o and o._name == 'account.move'">
                        <div class="last-page row">
                             <div class="col-12">
                                <img t-if="o.create_uid.sign_signature"
                                 t-att-src="image_data_uri(o.create_uid.sign_signature)"
                                 style="max-height: 2cm;"/>
                            </div>
                         </div>
                        <div class="last-page row">
                            <div class="col-4" style="border-top:1px solid black;">
                                <span>Name: <span t-field="o.create_uid"/></span>
                                <br/>
                                <span>Title: <t t-if="o.create_uid.partner_id.function"><t t-esc="o.create_uid.partner_id.function"/></t></span>
                            </div>
                            <div class="col-5">
                            </div>
                            <div class="col-3" style="border-top:1px solid black;">
                                <p class="text-center">Customer Sign/Stamp</p>
                            </div>
                        </div>
                    </t>
                     <div class="row">
                         <div class="col-12 text-end">
                             <strong>
                                 <div t-if="report_type == 'pdf'">
                                     Page
                                     <span class="page"/>
                                     of
                                     <span class="topage"/>
                                 </div>
                             </strong>
                         </div>
                     </div>
                     <t t-if="company.name == 'Dar Albanna Group Co. Ltd.'">
                         <div class="row mb0" style="text-center; border-top: 3px solid #366092">
                                 <div class="row  d-flex align-items-center text-center text-wrap lh-base"
                                      style="font-size:12.5px; color: #366092; padding-top:10px;">
                                     <p>Al Mansour District, 14th Ramadan Str., Section 613, Street 18, Bldg. 128, P.O. Box: Alalwia 3030, Baghdad, Iraq
                                         <br/>
                                         <strong>Office:</strong> 009641 5411117, <strong>Fax:</strong> 009641 5424955, <strong>Mobile:</strong> 00964 7901 748 180, <strong>Mobile:</strong> 00964 7901 904 700
                                         <br/>
                                         <strong>Email:</strong> sales@albanna.com, accounting@albanna.com. <strong>Website:</strong> www.albanna.com
                                     </p>
                                 </div>
                         </div>
                     </t>
                     <t t-if="company.name == 'Mawarid Albanna Co. Ltd.'">
                         <div class="row mb0" style="text-center; border-top: 3px solid #366092">
                                <div class="col-2 d-flex align-items-center">
                                     <img class="mx-auto" src="/web/image/569-7f5cccc3/IAF%20Logo-small.png" height="70px"/>
                                 </div>
                                 <div class="col-8 row  d-flex align-items-center text-center text-wrap lh-base" style="font-size:12.5px; color: #366092; padding-top:10px;">
                                     <p style="font-family: adobe-arabic; font-size:15px;">امباير بزنس تاور ت٣ ، الطابق ٨ ، مكتب رقم ١ ، أربيل ـ كردستان ، جمهورية العراق
                                         <br/>
                                         Empire Business Tower T3, 8th Floor, Office no. 1
                                        Erbil - Kurdistan, Republic of Iraq
                                         <br/>
                                         +964 770 55 99 111
                                            +964 750 25 99 111
                                            www.albanna.com
                                            erbil_office@albanna.com
                                     </p>
                                 </div>
                                <div class="col-2 d-flex align-items-center">
                                    <img class="mx-auto" src="/albanna_reports_customization/static/src/img/ASCERT-transparent.png" style="height:60px;" alt="Logo"/>
                                </div>
                         </div>
                     </t>                     
                 </div>
             </t>
         </xpath>


<!--        <xpath expr="//div[@t-attf-class='footer o_boxed_footer o_company_#{company.id}_layout']" position="attributes">-->
<!--            <attribute name="style">border: none !important</attribute>-->
<!--        </xpath>-->
<!--        <xpath expr="//div[@t-attf-class='footer o_boxed_footer o_company_#{company.id}_layout']/div" position="attributes">-->
<!--            <attribute name="style">border-top: 3px solid black !important</attribute>-->
<!--        </xpath>-->
<!--        <xpath expr="//div[@t-attf-class='footer o_boxed_footer o_company_#{company.id}_layout']/div" position="inside">-->
<!--            <t t-if="o and o._name in ['account.move']">-->
<!--                <span t-field="o.name"/>-->
<!--            </t>-->
<!--        </xpath>-->


<!--        <xpath expr="//div[@t-attf-class='footer o_boxed_footer o_company_#{company.id}_layout']/div" position="before">-->

<!--        </xpath>-->
    </template>

    <template id="tax_groups_totals_copy">
        <!--
                Generic template to display a list of tax groups with the related amounts.

                ARGUMENTS:
                - tax_totals: dict in the form generated by account.move's _get_tax_totals.
                - subtotal_to_show: The subtotal we need to render the groups from
            -->
        <t t-foreach="tax_totals['groups_by_subtotal'][subtotal_to_show]" t-as="amount_by_group">
          <tr>
            <t t-if="tax_totals['display_tax_base']">
              <td>
                <span t-esc="amount_by_group['tax_group_name']"/>
                <span class="text-nowrap"> on
                                <t t-esc="amount_by_group['formatted_tax_group_base_amount']"/>
                            </span>
              </td>
              <td class="text-end o_price_total">
                <span class="text-nowrap" t-esc="amount_by_group['formatted_tax_group_amount']"/>
              </td>
            </t>
            <t t-else="">
              <td>
                <span class="text-nowrap" t-esc="amount_by_group['tax_group_name']"/>
              </td>
              <td class="text-end o_price_total">
                <span class="text-nowrap" t-esc="amount_by_group['formatted_tax_group_amount']"/>
              </td>
            </t>
          </tr>
        </t>
      </template>

    <template id="document_tax_totals_copy">
        <t t-foreach="tax_totals['subtotals']" t-as="subtotal">
          <tr class="border-black o_subtotal">
            <td>Tax in Words here</td>
            <td>
              <strong t-esc="subtotal['name']"/>
            </td>
            <td class="text-end">
              <span t-att-class="oe_subtotal_footer_separator" t-esc="subtotal['formatted_amount']"/>
            </td>
          </tr>
          <t t-set="subtotal_to_show" t-value="subtotal['name']"/>
          <t t-call="albanna_reports_customization.tax_groups_totals_copy"/>
        </t>
        <t t-set="has_rounding" t-value="'formatted_amount_total_rounded' in tax_totals"/>
        <!--Total amount with all taxes-->
        <tr class="border-black o_total">
          <td style="color:black; background:white; border:solid 1px;width:60%;">
            <t t-set="inword_ar" t-value="o.currency_id.with_context(lang='ar_001').amount_to_text(o.amount_total)"/>
            <t t-set="inword_ar" t-value="inword_ar.replace('Dinar','دينار')"/>
            <t t-set="inword_ar" t-value="inword_ar.replace('Fils','فلس')"/>
            <t t-set="inword_ar" t-value="inword_ar.replace('Dollars','دولار')"/>
            <t t-set="inword_ar" t-value="inword_ar.replace('Cents','سنت')"/>
            <p>
              <span style="font-family:adobe arabic" t-esc="inword_ar"/>
            </p>
            <p>
              <t t-esc="o.currency_id.amount_to_text(o.amount_total)"/>
            </p>
          </td>
          <t t-if="has_rounding">
            <td class="text-center align-middle" style="width:15%; background: #af161c;">Total</td>
          </t>
          <t t-else="">
            <td class="text-center align-middle" style="width:15%; background: #af161c;">
              <strong>Total</strong>
            </td>
          </t>
            <td class="align-middle text-end" style="width:25%; background: #af161c;">
                <!-- Set the amount total as a string -->
                <t t-set="amount_total_str" t-value="tax_totals['formatted_amount_total']"/>
                
                <!-- Detect the currency symbol in the string and set the currency flag -->
                <t t-set="currency_symbol" t-value="'د.ع' if 'د.ع' in amount_total_str else ('$' if '$' in amount_total_str else '')"/>
                
                <!-- Clean the amount string based on the detected currency symbol -->
                <t t-set="amount_total_clean" t-value="amount_total_str.replace('\xa0', '').replace(currency_symbol, '').strip()"/>
                
                <!-- Convert the cleaned amount to a float -->
                <t t-set="ttls" t-value="float(amount_total_clean.replace(',', '')) if amount_total_clean else 0.0"/>
                
                <!-- Format and display the amount with the appropriate currency symbol -->
                <span t-esc="'{:,.2f}'.format(ttls) + ' ' + currency_symbol"/>
            </td>

<!--           <td class="align-middle text-end" style="width:25%; background: #af161c;">
                <t t-set="amount_total_str" t-value="tax_totals['formatted_amount_total']"/>
                <t t-set="amount_total_clean" t-value="amount_total_str.replace('\xa0', '').replace('د.ع', '').strip()"/>
                <t t-set="ttls" t-value="float(amount_total_clean.replace(',', '')) if amount_total_clean else 0.0"/>

                <span t-esc="'{:,.2f}'.format(ttls) + ' د.ع'"/>

          </td> -->
        </tr>
        <tr t-if="has_rounding">
          <td>Rounded Amount in words</td>
          <td>
            <strong>Total Rounded</strong>
          </td>
          <td class="text-end">
            <span t-esc="tax_totals['formatted_amount_total_rounded']"/>
          </td>
        </tr>
      </template>

    <template id="invoice_albanna_template">
        <t t-call="web.external_layout">
            <t t-set="o" t-value="o.with_context(lang=lang)"/>
            <t t-set="forced_vat" t-value="o.fiscal_position_id.foreign_vat"/>
            <!-- So that it appears in the footer of the report instead of the company VAT if it's set -->
            <div class="row" style="position:relative;top:-55px;">
                <t t-if="o.partner_shipping_id and (o.partner_shipping_id != o.partner_id)">
                    <div class="col-6">
                        <t t-set="information_block">
                            <div groups="account.group_delivery_invoice_address" name="shipping_address_block">
                                <strong>Shipping Address:</strong>
                                <div t-field="o.partner_shipping_id"
                                     t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}"/>
                            </div>
                        </t>
                    </div>
                    <div class="col-6" name="address_not_same_as_shipping">
                        <t t-set="address">
                            <address class="mb-0" t-field="o.partner_id"
                                     t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}"/>
                            <div t-if="o.partner_id.vat">
                                <t t-if="o.company_id.account_fiscal_country_id.vat_label"
                                   t-esc="o.company_id.account_fiscal_country_id.vat_label" id="inv_tax_id_label"/>
                                <t t-else="">Tax ID</t>:
                                <span t-field="o.partner_id.vat"/>
                            </div>
                        </t>
                    </div>
                </t>
                <t t-elif="o.partner_shipping_id and (o.partner_shipping_id == o.partner_id)">
                    <!-- <div class="col-6" name="address_same_as_shipping">
                              <t t-set="address">
                                 <address class="mb-0" t-field="o.partner_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}"/>
                                  <div t-if="o.partner_id.vat">
                                      <t t-if="o.company_id.account_fiscal_country_id.vat_label" t-esc="o.company_id.account_fiscal_country_id.vat_label" id="inv_tax_id_label"/>
                                      <t t-else="">Tax ID</t>: <span t-field="o.partner_id.vat"/>
                                  </div>
                              </t>
                              </div>-->
                    <div class="col-4">
                        <!--<h3>Customer</h3>-->
                        <t t-if="o.partner_id.name">
                            <h5>
                                <span t-field="o.partner_id.name"/>
                            </h5>
                        </t>
                        <t t-if="o.partner_id.x_studio_contact_name_en">
                            <span t-field="o.partner_id.x_studio_contact_name_en"/>
                            <br/>
                        </t>
                        <t t-if="o.partner_id.street">
                            <span t-field="o.partner_id.street"/>
                            <br/>
                        </t>
                        <t t-if="o.partner_id.city">
                            <span t-field="o.partner_id.city"/>
                            <br/>
                        </t>
                        <t t-if="o.partner_id.state_id">
                            <span t-field="o.partner_id.state_id"/>
                        </t>
                        <!--<t t-if="o.partner_id.zip"><span t-field="o.partner_id.zip"/><br/></t>-->
                        <t t-if="o.partner_id.country_id">
                            , <span t-field="o.partner_id.country_id"/>
                        </t>
                    </div>
                    <div class="col-4">
                        <h3 class="text-center" style="color:#af161c;">
                            <span style="font-family:adobe arabic;">فاتورة</span>
                            <br></br>
                            <span>Invoice</span>
                            <br></br>
                            <span t-if="o.name != '/'" t-field="o.name"/>
                        </h3>
                    </div>
                    <div class="col-4" name="arabic_address"
                         style="direction:rtl; font-family:adobe arabic; font-size: 15px">
                        <!--<h3>الزبون</h3>-->
                        <t t-if="o.partner_id.x_studio_char_field_makkU">
                            <h4>
                                <span t-field="o.partner_id.x_studio_char_field_makkU"/>
                            </h4>
                        </t>
                        <t t-if="o.partner_id.x_studio_contact_name_ar">
                            <span t-field="o.partner_id.x_studio_contact_name_ar"/>
                            <br/>
                        </t>
                        <t t-if="o.partner_id.x_studio_street_ar">
                            <span t-field="o.partner_id.x_studio_street_ar"/>
                            <br/>
                        </t>
                        <t t-if="o.partner_id.x_studio_city_ar_1">
                            <span t-field="o.partner_id.x_studio_city_ar_1"/>
                            <br/>
                        </t>
                        <t t-if="o.partner_id.x_studio_state_ar">
                            <span t-field="o.partner_id.x_studio_state_ar"/>
                        </t>
                        <!--<t t-if="o.partner_id.x_studio_area_ar"><span t-field="o.partner_id.x_studio_area_ar"/><br/></t>-->
                        <t t-if="o.partner_id.x_studio_country_ar">
                            , <span t-field="o.partner_id.x_studio_country_ar"/>
                        </t>
                    </div>
                </t>
                <t t-else="">
                    <div class="offset-col-6 col-6" name="no_shipping">
                        <t t-set="address">
                            <address class="mb-0" t-field="o.partner_id"
                                     t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}"/>
                            <div t-if="o.partner_id.vat">
                                <t t-if="o.company_id.account_fiscal_country_id.vat_label"
                                   t-esc="o.company_id.account_fiscal_country_id.vat_label" id="inv_tax_id_label"/>
                                <t t-else="">Tax ID</t>:
                                <span t-field="o.partner_id.vat"/>
                            </div>
                        </t>
                    </div>
                </t>
            </div>
            <div style="margin-top:-50px;">
            <div class="page">
                    <t t-set="lot_values_grouped" t-value="o._get_invoiced_lot_values()"/>
                    <div id="informations" class="row mb-2">
                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_date" name="invoice_date">
                            <t t-if="o.move_type == 'out_invoice'">
                                <strong style="color:#366092;">Invoice Date:</strong>
                            </t>
                            <t t-elif="o.move_type == 'out_refund'">
                                <strong style="color:#366092;">Credit Note Date:</strong>
                            </t>
                            <t t-elif="o.move_type == 'out_receipt'">
                                <strong style="color:#366092;">Receipt Date:</strong>
                            </t>
                            <t t-else="">
                                <strong style="color:#366092;">Date:</strong>
                            </t>
                            <p class="m-0" t-field="o.invoice_date" style="color:#366092;"/>
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2 text-center"
                             t-if="o.invoice_date_due and o.move_type == 'out_invoice' and o.state == 'posted'"
                             name="due_date">
                            <strong style="color:#366092;">Due Date:</strong>
                            <p class="m-0" t-field="o.invoice_date_due" style="color:#366092;"/>
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_origin" name="origin" style="text-align:right;">
                            <strong style="color:#366092;">Sales Order:</strong>
                            <p class="m-0" t-field="o.invoice_origin" style="color:#366092;"/>
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.partner_id.ref" name="customer_code">
                            <strong style="color:#366092;">Customer Code:</strong>
                            <p class="m-0" t-field="o.partner_id.ref" style="color:#366092;"/>
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.ref" name="reference">
                            <strong style="color:#366092;">Reference:</strong>
                            <p class="m-0" t-field="o.ref" style="color:#366092;"/>
                        </div>
                        <div class="col-auto mw-100 mb-2" t-if="o.invoice_incoterm_id"
                             groups="sale_stock.group_display_incoterm" name="invoice_incoterm_id">
                            <strong style="color:#366092;">Incoterm:</strong>
                            <p class="m-0" t-field="o.invoice_incoterm_id.code" style="color:#366092;"/>
                        </div>
                    </div>
                    <t t-set="display_discount" t-value="any(l.discount for l in o.invoice_line_ids)"/>
                    <table class="table table-sm o_main_table table-bordered" name="invoice_line_table">
                        <thead>
                            <tr style="font-family:adobe arabic">
                                <th style="width:55%; color:#366092;" name="th_description" class="text-start">
                                    <span style="font-family:adobe arabic">وصف المادة</span>
                                    <br/>
                                    <span >Description</span>
                                </th>
                                <th style="width:10%; color:#366092;" name="th_quantity" class="text-end">
                                    <span>الكمية</span>
                                    <br/> 
                                    <span>Quantity</span>
                                </th>
                                <th style="width:15%; color:#366092;" name="th_priceunit"
                                    t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                    <span>سعر الوحدة<br/>Unit Price
                                    </span>
                                </th>
<!--                                <th name="th_price_unit" t-if="display_discount"-->
<!--                                    t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">-->
<!--                                    <span>Disc.%</span>-->
<!--                                </th>-->
                                <!-- <th name="th_taxes" t-attf-class="text-start {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>Taxes</span></th> -->
                                <th style="width:20%; color:#366092;" name="th_subtotal" class="text-end">
                                    <span groups="account.group_show_line_subtotals_tax_excluded">المجموعة<br/>Amount
                                    </span>
                                    <span groups="account.group_show_line_subtotals_tax_included">Total Price</span>
                                </th>
                            </tr>

                        </thead>
                        <tbody class="invoice_tbody">
                            <t t-set="current_subtotal" t-value="0"/>
                            <t t-set="lines"
                               t-value="o.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)"/>
                            <t t-foreach="lines" t-as="line">
                                <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal"
                                   groups="account.group_show_line_subtotals_tax_excluded"/>
                                <t t-set="current_subtotal" t-value="current_subtotal + line.price_total"
                                   groups="account.group_show_line_subtotals_tax_included"/>
                                <tr t-att-class="'bg-200 fw-bold o_line_section' if line.display_type == 'line_section' else 'fst-italic o_line_note' if line.display_type == 'line_note' else ''">
                                    <t t-if="line.display_type == 'product'" name="account_invoice_line_accountable">
                                        <td name="account_invoice_line_name">
                                            <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            <br/>
                                            <t t-set="line_lot_grouped" t-value="[]"/>
                                            <t t-foreach="lot_values_grouped" t-as="lvg">
                                                <t t-if="request.env['stock.lot'].sudo().browse(lvg['lot_id']).product_id.id == line.product_id.id">
                                                    <t t-set="line_lot_grouped" t-value="line_lot_grouped + [lvg]"/>
                                                </t>
                                            </t>
                                            <t t-if="line_lot_grouped">
                                                <table class="table p-0 m-0" style="border:none !important;font-size:11px !important;">
                                                    <thead style="border:none !important;">
                                                        <tr style="border:none !important; ">
                                                            <th class="text-center p-0 m-0" style="border: none; color:#366092;">Batch No.</th>
                                                            <th class="text-center p-0 m-0" style="border: none; color:#366092;">Qty</th>
                                                            <th class="text-center p-0 m-0" style="border: none; color:#366092;">Expiry Date</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody style="border:none !important;">
                                                        <t t-foreach="line_lot_grouped" t-as="line_lot">
                                                            <tr style="border:none !important;">
                                                                <td class="text-center p-0 m-0" style="border: none;"><t t-esc="line_lot['lot_name']"/></td>
                                                                <td class="text-center p-0 m-0" style="border: none;"><t t-esc="int(float(line_lot['quantity'].replace(',', '')))"/>
                                                                </td>
                                                                <t t-set="lot_rec" t-value="request.env['stock.lot'].sudo().browse(line_lot['lot_id'])"/>
                                                                <td class="text-center p-0 m-0" style="border: none;"><t t-esc="lot_rec.expiration_date" t-options="{'widget': 'date'}"/></td>
                                                            </tr>
                                                        </t>
                                                    </tbody>
                                                </table>
                                            </t>
                                        </td>
                                        <td class="text-end">
                                            <span t-esc="'{0:,.0f}'.format(int(line.quantity))"/>
                                            <span t-field="line.product_uom_id" groups="uom.group_uom"/>
                                        </td>
                                        <td t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <t t-set="curr" t-value="line.currency_id.symbol"/>
                                            <t t-if="line.currency_id.name == 'USD'">
                                                <span class="text-nowrap"
                                                      t-esc="'{0:,.2f}'.format(float(line.price_unit))"/>
                                                <span class="text-nowrap" t-esc="curr"/>
                                                <!--t-field="'{0:,.2f}'.format(int(line.price_unit))"/>-->
                                            </t>
                                            <t t-elif="line.currency_id.name == 'IQD'">
                                                <t t-set="uprice" t-value="'{0:,.2f}'.format(float(line.price_unit))"/>
                                                <span class="text-nowrap"
                                                      t-esc="'{0:,.2f}'.format(float(line.price_unit))"/>
                                                <span class="text-nowrap" t-esc="curr"/>
                                            </t>
                                        </td>
<!--                                        <td t-if="display_discount"-->
<!--                                            t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">-->
<!--                                            <span class="text-nowrap" t-field="line.discount"/>-->
<!--                                        </td>-->
                                        <!-- <td t-attf-class="text-start {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                                                <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_ids))" id="line_tax_ids"/>
                                                            </td> -->
                                        <td class="text-end o_price_total">
                                            <t t-set="subtot" t-value="'{0:,.2f}'.format(float(line.price_subtotal))"
                                               groups="account.group_show_line_subtotals_tax_excluded"/>
                                            <span class="text-nowrap" t-esc="subtot"/>
                                            <span class="text-nowrap" t-esc="curr"/>
                                            <!--<span class="text-nowrap" t-field="line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>-->
                                            <span class="text-nowrap" t-field="line.price_total"
                                                  groups="account.group_show_line_subtotals_tax_included"/>
                                        </td>
                                    </t>
                                    <t t-if="line.display_type == 'line_section'">
                                        <td colspan="99">
                                            <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                        </td>
                                        <t t-set="current_section" t-value="line"/>
                                        <t t-set="current_subtotal" t-value="0"/>
                                    </t>
                                    <t t-if="line.display_type == 'line_note'">
                                        <td colspan="99">
                                            <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                        </td>
                                    </t>
                                </tr>
                                <t t-if="current_section and (line_last or lines[line_index+1].display_type == 'line_section')">
                                    <tr class="is-subtotal text-end">
                                        <td colspan="99">
                                            <strong class="mr16">Subtotal</strong>
                                            <span t-esc="current_subtotal"
                                                  t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                        </td>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>
                    <div class="clearfix mb-4">
                        <div id="total" class="row">
                            <!--          <div class="col-6 ms-auto" style="color:white; border:1px solid black; align: center; background:rgb(175 22 28 / 90%)">
                                              <t t-esc="o.currency_id.amount_to_text(o.amount_total)"/>
                                            </div> -->
                            <div t-attf-class="#{'col-12' if report_type != 'html' else 'col-sm-7 col-md-6'} ms-auto">
                                <table class="table table-sm table-borderless" style="page-break-inside: avoid;">
                                    <!--Tax totals-->
                                    <t t-set="tax_totals" t-value="o.tax_totals"/>
                                    <t t-call="albanna_reports_customization.document_tax_totals_copy"/>
                                    <!--Payments-->
                                    <t t-if="print_with_payments">
                                        <t t-if="o.payment_state != 'invoicing_legacy'">
                                            <t t-set="payments_vals"
                                               t-value="o.sudo().invoice_payments_widget and o.sudo().invoice_payments_widget['content'] or []"/>
                                            <t t-foreach="payments_vals" t-as="payment_vals">
                                                <tr t-if="payment_vals['is_exchange'] == 0">
                                                    <td class="text-end" colspan="2">
                                                        <i class="oe_form_field text-end oe_payment_label">Paid on
                                                            <t t-esc="payment_vals['date']"
                                                               t-options="{&quot;widget&quot;: &quot;date&quot;}"/>
                                                        </i>
                                                    </td>
                                                    <td class="text-end">
                                                        <span class="text-no-wrap" t-esc="payment_vals['amount']"
                                                              t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                        <span class="text-no-wrap" t-esc="curr"/>
                                                    </td>
                                                </tr>
                                            </t>
                                            <t t-if="len(payments_vals) &gt; 0">
                                                <tr class="border-black">
                                                    <td style="background:white"/>
                                                    <td class="align-middle border-black" style="background:white">
                                                        <strong>Amount Due</strong>
                                                    </td>
                                                    <td class="align-middle text-end"
                                                        style="background:white; color:#AF161C">
                                                        <span class="o_total" t-field="o.amount_residual"
                                                              t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                        <span class="text-no-wrap" t-esc="curr"/>
                                                    </td>
                                                </tr>
                                            </t>

                                        </t>
                                    </t>
                                </table>

                                <table class="table table-bordered" style="page-break-inside:avoid;background-color:white !important;">
                                    <thead>
                                        <tr style="background-color:white !important;">
                                            <th class="text-center align-middle"><strong  style="color:#af161c;">Payment Terms</strong></th>
                                            <th class="text-center align-middle" style="direction:rtl; font-family:adobe arabic;"><strong  style="color:#af161c;">شروط الدفع</strong></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="background-color:white !important;">
                                            <td class="text-center align-middle" style="background-color:white !important;">
                                                <strong class="fw-normal" style="color:#af161c;">
                                                    Invoice must be paid by: <span t-field="o.invoice_date_due"/>
                                                </strong>
                                            </td>
                                            <td class="text-center align-middle " style="width:50%;background-color:white !important;">
                                                <strong class="fw-normal" style="color:#af161c;">
                                                    <span t-field="o.invoice_date_due"/>
                                                    <span style="direction:rtl; font-family:adobe arabic; color:#af161c;">
                                                    یتم تسدید المبلغ وخلال مدة اقصاها
                                                    </span>
                                                </strong>
                                           </td>
                                        </tr>
                                        <tr>
                                            <td class="text-center align-middle p-1 m-2" style="color:black;background-color:white !important;">Goods Sold Are Not Returnable</td>
                                            <td class="text-center align-middle p-1 m-2" style="direction:rtl; font-family:adobe arabic;color:black;background-color:white !important;">البضاعة غیر قابلة للاسترجاع</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table class="table table-bordered o_main_table" style="page-break-inside:avoid;" name="invoice_line_table">
                                    <thead>
                                        <tr>
                                            <th class="text-center align-middle fw-normal" style="color:#366092;">
                                                <span style="direction:rtl; font-family:adobe arabic;"> أذا كان لدیك أي استفسار فیما یخص هذه القائمة، الرجاء الاتصال</span>
                                                <br/>
                                                If you have any concerns for this invoice please contact
                                            </th>
                                            <th class="text-center align-middle fw-normal">
                                                    <t t-esc="o.invoice_sales_person_id.name"/>
                                                    <br/>
                                                    <t t-if="o.invoice_sales_person_id.mobile" t-esc="o.invoice_sales_person_id.mobile"/>
                                                    <t t-if="not o.invoice_sales_person_id.mobile and o.invoice_sales_person_id.phone" t-esc="o.invoice_sales_person_id.phone"/>
                                            </th>
                                        </tr>
                                    </thead>
                                </table>

<!--                                <table class="table table-bordered" style="page-break-inside:avoid;">-->
<!--                                    <tr>-->
<!--                                       <td class="align-middle" style="width:50%;">-->
<!--                                            <span t-field="o.invoice_date_due"/>    یتم تسدید المبلغ وخلال مدة اقصاها-->
<!--                                       </td>-->
<!--                                        <td>شروط الدفع</td>-->
<!--                                        <td>ملاحظة</td>-->
<!--                                        <td>Notes</td>-->
<!--                                    </tr>-->
<!--                                    <tr>-->
<!--                                        <td class="align-middle" style="width:50%;">-->
<!--                                           Invoice must be paid by: <span t-field="o.invoice_date_due"/>-->
<!--                                       </td>-->
<!--                                        <td>Payment terms</td>-->
<!--                                        <td colspan="2">البضاعة غیر قابلة للاسترجاع</td>-->
<!--                                    </tr>-->
<!--                                    <tr>-->
<!--                                       <td class="align-middle" style="width:50%;">-->
<!--                                       </td>-->
<!--                                        <td></td>-->
<!--                                        <td colspan="2">Goods Sold Are Not Returnable</td>-->
<!--                                    </tr>-->
<!--                                    <tr>-->
<!--                                        <td colspan="2">-->
<!--                                             أذا كان لدیك أي استفسار فیما یخص هذه القائمة، الرجاء الاتصال-->
<!--                                            <br/>-->
<!--                                            If you have any concerns for this invoice please contact-->
<!--                                        </td>-->
<!--                                        <td colspan="2">-->
<!--                                            <t t-esc="o.user_id.name"/>-->
<!--                                            <br/>-->
<!--                                            <t t-if="o.user_id.mobile" t-esc="o.user_id.mobile"/>-->
<!--                                            <t t-if="not o.user_id.mobile and o.user_id.phone" t-esc="o.user_id.phone"/>-->
<!--                                        </td>-->
<!--                                    </tr>-->
<!--                                </table>-->
                            </div>
                        </div>
<!--                        <t groups="stock_account.group_lot_on_invoice">-->
<!--                            <t t-set="lot_values" t-value="o._get_invoiced_lot_values()"/>-->
<!--                            <t t-if="lot_values">-->
<!--                                <br/>-->
<!--                                <table class="table table-sm" style="width: 50%;" name="invoice_snln_table">-->
<!--                                    <thead>-->
<!--                                        <tr>-->
<!--                                            <th>-->
<!--                                                <span>Product</span>-->
<!--                                            </th>-->
<!--                                            <th class="text-end">-->
<!--                                                <span>Quantity</span>-->
<!--                                            </th>-->
<!--                                            <th class="text-end">-->
<!--                                                <span>SN/LN</span>-->
<!--                                            </th>-->
<!--                                        </tr>-->
<!--                                    </thead>-->
<!--                                    <tbody>-->
<!--                                        <t t-foreach="lot_values" t-as="snln_line">-->
<!--                                            <tr>-->
<!--                                                <td>-->
<!--                                                    <t t-esc="snln_line['product_name']"/>-->
<!--                                                </td>-->
<!--                                                <td class="text-end">-->
<!--                                                    <t t-esc="snln_line['quantity']"/>-->
<!--                                                    <t t-esc="snln_line['uom_name']" groups="uom.group_uom"/>-->
<!--                                                </td>-->
<!--                                                <td class="text-end">-->
<!--                                                    <t t-esc="snln_line['lot_name']"/>-->
<!--                                                </td>-->
<!--                                            </tr>-->
<!--                                        </t>-->
<!--                                    </tbody>-->
<!--                                </table>-->
<!--                            </t>-->
<!--                        </t>-->
                    </div>
                </div>
<!--            <div class="row" style="position:relative;font-size:12px;margin-top:0;page-break-inside:avoid;">-->
<!--                                    <div class="col-4" style="border-top:1px solid black;">-->
<!--                                        <span>Name: <span t-field="o.create_uid"/></span>-->
<!--                                        <br/>-->
<!--                                        <span>Title: <t t-if="o.create_uid.partner_id.title"><t t-esc="o.create_uid.partner_id.title"/></t></span>-->
<!--                                    </div>-->
<!--                                    <div class="col-5">-->
<!--                                    </div>-->
<!--                                    <div class="col-3" style="border-top:1px solid black;">-->
<!--                                        <p class="text-center">Customer Signature</p>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                <p t-if="o.move_type in ('out_invoice', 'in_refund') and o.payment_reference"-->
<!--                   name="payment_communication" class="mt-4">-->
<!--                    Please use the following communication for your payment :-->
<!--                    <b>-->
<!--                        <span t-field="o.payment_reference"/>-->
<!--                    </b>-->
<!--                </p>-->
<!--                <p>If you have any concerns for this invoice please contact-->
<!--                    <br/>-->
<!--                    <span t-field="o.user_id" t-options="{&quot;widget&quot;: &quot;contact&quot;}"/>-->
<!--                </p>-->
<!--                <p style="color:red">-->
<!--                    <strong>Goods Sold Are Not Returnable</strong>-->
<!--                </p>-->
<!--                <p style="color:red">-->
<!--                    <strong>Invoice must be paid within due date mentioned below</strong>-->
<!--                </p>-->
                <t t-set="payment_term_details" t-value="o.payment_term_details"/>
<!--                <div t-field="o.invoice_payment_term_id.note" name="payment_term"/>-->
<!--                <t t-if="o.invoice_payment_term_id.display_on_invoice and payment_term_details">-->
<!--                    <div t-if="o.show_payment_term_details" id="total_payment_term_details_table" class="row">-->
<!--                        <div t-attf-class="#{'col-7' if report_type != 'html' else 'col-sm-7 col-md-6'} mt-2 mb-2">-->
<!--                            <table class="table table-sm" style="page-break-inside: avoid;">-->
<!--                                <th class="border-black text-start">-->
<!--                                    Due Date-->
<!--                                </th>-->
<!--                                <th class="border-black text-end">-->
<!--                                    Amount Due-->
<!--                                </th>-->
<!--                                <th t-if="o.show_discount_details" class="border-black text-end">-->
<!--                                    Discount-->
<!--                                </th>-->
<!--                                <t t-foreach="payment_term_details" t-as="term">-->
<!--                                    <tr>-->
<!--                                        <td t-esc="term.get('date')" class="text-start"/>-->
<!--                                        <td t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"-->
<!--                                            t-esc="term.get('amount')" class="text-end"/>-->
<!--                                        <td t-if="term.get('discount_date')" class="text-end">-->
<!--                                            <span t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"-->
<!--                                                  t-esc="term.get('discount_amount_currency')"/>-->
<!--                                            if paid before-->
<!--                                            <span t-esc="term.get('discount_date')"/>-->
<!--                                        </td>-->
<!--                                    </tr>-->
<!--                                </t>-->
<!--                            </table>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </t>-->
<!--                <div t-if="not is_html_empty(o.narration)" name="comment">-->
<!--                    <span t-field="o.narration"/>-->
<!--                </div>-->
<!--                <p t-if="not is_html_empty(o.fiscal_position_id.note)" name="note">-->
<!--                    <span t-field="o.fiscal_position_id.note"/>-->
<!--                </p>-->
<!--                <p t-if="o.invoice_incoterm_id" name="incoterm">-->
<!--                    <strong>Incoterm:</strong>-->
<!--                    <span t-field="o.invoice_incoterm_id.code"/>-->
<!--                    - -->
<!--                    <span t-field="o.invoice_incoterm_id.name"/>-->
<!--                </p>-->
<!--                <div id="qrcode" t-if="o.display_qr_code and o.amount_residual &gt; 0">-->
<!--                    <t t-set="qr_code_url" t-value="o._generate_qr_code(silent_errors=True)"/>-->
<!--                    <p t-if="qr_code_url">-->
<!--                        <strong class="text-center">Scan me with your banking app.</strong>-->
<!--                        <br/>-->
<!--                        <br/>-->
<!--                        <img class="border border-dark rounded" t-att-src="qr_code_url"/>-->
<!--                    </p>-->
<!--                </div>-->
<!--                <div class="mb0">-->
<!--                    <t t-if="o.company_id.name == 'Albanna Scientific Bureau'">-->
<!--                        <table style="border:1px solid #28459f; width:100%; align:center; text-align:center; page-break-inside: avoid;">-->
<!--                            <thead style="background:lightgrey">-->
<!--                                <tr style="border:1px solid; height:auto; font-size:10.5px; valign:center">-->
<!--                                    <th style="border:1px solid;">-->
<!--                                        <span style="text-center; color:#28459f; font-family:adobe arabic">-->
<!--                                            تم استلام البضاعة وسيتم التسديد-->
<!--                                            <br/>-->
<!--                                            خلال المدة المقررة في شروط الدفعة-->
<!--                                            <br/>-->
<!--                                        </span>-->
<!--                                        <span style="color:#28459f">(Goods Received, payment will be placed as payment-->
<!--                                            terms stated)-->
<!--                                        </span>-->
<!--                                    </th>-->
<!--                                    <th style="width:1%; background:white">-->
<!--                                        <span/>-->
<!--                                    </th>-->
<!--                                    <th style="width:20%; border:1px solid">-->
<!--                                        <span style="text-align:center; direction:rtl; font-family:adobe arabic">-->
<!--                                            تم الموافقة من قبل مدير ضمان الجودة-->
<!--                                            <br/>-->
<!--                                        </span>-->
<!--                                        <span>Approved by Quality Manager</span>-->
<!--                                    </th>-->
<!--                                    <th style="width:20%; border:1px solid">-->
<!--                                        <span style="text-align:center; direction:rtl; font-family:adobe arabic">-->
<!--                                            تم التجهيز من قبل-->
<!--                                            <br/>-->
<!--                                        </span>-->
<!--                                        <span>(Doc. Prepared by)</span>-->
<!--                                    </th>-->
<!--                                    <th style="border:1px solid">-->

<!--                                    </th>-->
<!--                                </tr>-->
<!--                            </thead>-->
<!--                            <tbody>-->
<!--                                <tr style="height:100px">-->
<!--                                    <td style="border:1px solid"/>-->
<!--                                    <td style="width:10px; background:white"/>-->
<!--                                    <td style="border:1px solid">-->
<!--                                        <span style="text-align:center; direction:rtl; font-family:adobe arabic">-->
<!--                                            <b>احمد سلام عبد الامير</b>-->
<!--                                        </span>-->
<!--                                    </td>-->
<!--                                    <td style="border:1px solid">-->
<!--                                        <span style="text-align:center; direction:rtl; font-family:adobe arabic">-->
<!--                                            &lt;!&ndash;<t t-esc="o.user_id.name"/><br/>&ndash;&gt;-->
<!--                                            <b>احمد عبدالرحمن أسماعيل</b>-->
<!--                                        </span>-->
<!--                                    </td>-->
<!--                                    <td style="border:1px solid">-->
<!--                                        <span style="text-align:center; direction:rtl; font-family:adobe arabic">-->
<!--                                            <b>الآسم</b>-->
<!--                                        </span>-->
<!--                                        <br/>-->
<!--                                        <span>-->
<!--                                            <b>Name</b>-->
<!--                                        </span>-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                                <tr style="height:100px">-->
<!--                                    <td style="background:white"/>-->
<!--                                    <td style="border:1px solid; background:white"/>-->
<!--                                    <td style="border:1px solid">-->

<!--                                    </td>-->
<!--                                    <td style="border:1px solid">-->
<!--                                        &lt;!&ndash;<t t-esc="o.user_id.signature"/>&ndash;&gt;-->
<!--                                    </td>-->
<!--                                    <td style="border:1px solid">-->
<!--                                        <span style="text-align:center; direction:rtl;  font-family:adobe arabic">-->
<!--                                            <b>االتوقيع</b>-->
<!--                                        </span>-->
<!--                                        <br/>-->
<!--                                        <span>-->
<!--                                            <b>Signature</b>-->
<!--                                        </span>-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                            </tbody>-->
<!--                        </table>-->
<!--                    </t>-->
<!--                    <t t-if="o.company_id.name == 'Albanna Drugstore'">-->
<!--                        <table style="border:1px solid #28459f; width:100%; align:center; text-align:center; page-break-inside: avoid;">-->
<!--                            <thead style="background:lightgrey">-->
<!--                                <tr style="border:1px solid; height:auto; font-size:10.5px; valign:center">-->
<!--                                    <th style="border:1px solid;">-->
<!--                                        <span style="text-center; color:#28459f; font-family:adobe arabic">-->
<!--                                            تم استلام البضاعة وسيتم التسديد-->
<!--                                            <br/>-->
<!--                                            خلال المدة المقررة في شروط الدفعة-->
<!--                                            <br/>-->
<!--                                        </span>-->
<!--                                        <span style="color:#28459f">(Goods Received, payment will be placed as payment-->
<!--                                            terms stated)-->
<!--                                        </span>-->
<!--                                    </th>-->
<!--                                    <th style="width:1%; background:white">-->
<!--                                        <span/>-->
<!--                                    </th>-->
<!--                                    <th style="width:20%; border:1px solid">-->
<!--                                        <span style="text-align:center; direction:rtl; font-family:adobe arabic">-->
<!--                                            تم الموافقة من قبل مدير ضمان الجودة-->
<!--                                            <br/>-->
<!--                                        </span>-->
<!--                                        <span>Approved by Quality Manager</span>-->
<!--                                    </th>-->
<!--                                    <th style="width:20%; border:1px solid">-->
<!--                                        <span style="text-align:center; direction:rtl; font-family:adobe arabic">-->
<!--                                            تم التجهيز من قبل-->
<!--                                            <br/>-->
<!--                                        </span>-->
<!--                                        <span>(Doc. Prepared by)</span>-->
<!--                                    </th>-->
<!--                                    <th style="border:1px solid">-->

<!--                                    </th>-->
<!--                                </tr>-->
<!--                            </thead>-->
<!--                            <tbody>-->
<!--                                <tr style="height:100px">-->
<!--                                    <td style="border:1px solid"/>-->
<!--                                    <td style="width:10px; background:white"/>-->
<!--                                    <td style="border:1px solid">-->
<!--                                        <span style="text-align:center; direction:rtl; font-family:adobe arabic">-->
<!--                                            <b>الصيدلاني عدي طالب</b>-->
<!--                                        </span>-->
<!--                                    </td>-->
<!--                                    <td style="border:1px solid">-->
<!--                                        <span style="text-align:center; direction:rtl; font-family:adobe arabic">-->
<!--                                            &lt;!&ndash;<t t-esc="o.user_id.name"/><br/>&ndash;&gt;-->
<!--                                            <b>عبدالله جمال داود</b>-->
<!--                                        </span>-->
<!--                                    </td>-->
<!--                                    <td style="border:1px solid">-->
<!--                                        <span style="text-align:center; direction:rtl; font-family:adobe arabic">-->
<!--                                            <b>الآسم</b>-->
<!--                                        </span>-->
<!--                                        <br/>-->
<!--                                        <span>-->
<!--                                            <b>Name</b>-->
<!--                                        </span>-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                                <tr style="height:100px">-->
<!--                                    <td style="background:white"/>-->
<!--                                    <td style="border:1px solid; background:white"/>-->
<!--                                    <td style="border:1px solid">-->

<!--                                    </td>-->
<!--                                    <td style="border:1px solid">-->
<!--                                        &lt;!&ndash;<t t-esc="o.user_id.signature"/>&ndash;&gt;-->
<!--                                    </td>-->
<!--                                    <td style="border:1px solid">-->
<!--                                        <span style="text-align:center; direction:rtl;  font-family:adobe arabic">-->
<!--                                            <b>االتوقيع</b>-->
<!--                                        </span>-->
<!--                                        <br/>-->
<!--                                        <span>-->
<!--                                            <b>Signature</b>-->
<!--                                        </span>-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                            </tbody>-->
<!--                        </table>-->
<!--                    </t>-->
<!--                </div>-->
            </div>
        </t>
    </template>


    <template id="invoice_albanna_document">
<!--        <t t-set="company" t-value="request.env.user.company_id"/>-->
        <t t-set="cids" t-value="request.httprequest.cookies.get('cids')"/>
        <t t-set="active_company_int_list" t-value="[]"/>
        <t t-if="cids">
            <t t-set="active_company_str_list" t-value="cids.split(',')"/>
            <t t-foreach="active_company_str_list" t-as="active_company_str">
                <t t-set="active_company_int_list" t-value="active_company_int_list + [int(active_company_str)]"/>
            </t>
        </t>
        <t t-if="len(active_company_int_list) > 0">
            <t t-set="company" t-value="request.env['res.company'].sudo().browse(active_company_int_list[0])"/>
        </t>
        <t t-call="web.html_container">
          <t t-foreach="docs" t-as="o">
            <t t-set="lang" t-value="o.partner_id.lang"/>
            <t t-set="print_with_payments" t-value="True"/>
            <t t-if="o._get_name_invoice_report() == 'account.report_invoice_document'" t-call="albanna_reports_customization.invoice_albanna_template" t-lang="lang"/>
          </t>
        </t>
    </template>

</odoo>
